package forward

dialect "java"

import com.ftn.sbnz.model.models.CurtainFabric
import com.ftn.sbnz.model.models.FabricRecommendation
import com.ftn.sbnz.model.util.CurtainUtils

rule "Curtain fabric recommendation"
when
    $cf : CurtainFabric($c: curtain, fabric.category == "HOME_DECOR")
then
    double meters = CurtainUtils.calculateCurtainLength(
        $cf.getCurtain().getHeight(),
        $cf.getCurtain().getWidth(),
        $cf.getCurtain().getPleatFactor(),
        $cf.getCurtain().getHangingType(),
        $cf.getCurtain().getMarginTop(),
        $cf.getCurtain().getMarginBottom(),
        $cf.getFabric().getWidth()
    );

    insert(new FabricRecommendation(
        $cf.getFabric(),
        meters,
        "Zavesa (" + $c.getHangingType() + ") ‚Äì visina " +
        $c.getHeight() + " cm, ≈°irina prozora " +
        $c.getWidth() + " cm, faktor nabrane " +
        $c.getPleatFactor() + ", preporuƒçena metra≈æa: " + meters + " m"
    ));

    System.out.println("üè° Recommended fabric: " + $cf.getFabric().getName());
end
