package forward

dialect "java"

import com.ftn.sbnz.model.models.BedSheetFabric
import com.ftn.sbnz.model.models.FabricRecommendation
import com.ftn.sbnz.model.util.BedSheetUtils

// Flat sheet (bez lastiša)
rule "Flat sheet"
when
    $bsf : BedSheetFabric(
        getType() == "FLAT",
        getFabricCategory() == "HOME_DECOR"
    )
then
    double meters = BedSheetUtils.flatSheetMeters(
        $bsf.getLength(),
        $bsf.getWidth(),
        $bsf.getOverhang(),
        $bsf.getFabricWidth()
    );
    insert(new FabricRecommendation(
        $bsf.getFabric(),
        meters,
        "Flat sheet – length " + $bsf.getLength() +
        " cm, width " + $bsf.getWidth() +
        " cm, overhang " + $bsf.getOverhang() + " cm"
    ));
end

// Fitted sheet (sa lastišem)
rule "Fitted sheet"
when
    $bsf : BedSheetFabric(
        getType() == "FITTED",
        getFabricCategory() == "HOME_DECOR"
    )
then
    double meters = BedSheetUtils.fittedSheetMeters(
        $bsf.getLength(),
        $bsf.getWidth(),
        $bsf.getHeight(),
        $bsf.getFabricWidth()
    );
    insert(new FabricRecommendation(
        $bsf.getFabric(),
        meters,
        "Fitted sheet – length " + $bsf.getLength() +
        " cm, width " + $bsf.getWidth() +
        " cm, mattress height " + $bsf.getHeight() + " cm"
    ));
end

// Duvet cover (navlaka za jorgan)
rule "Duvet cover"
when
    $bsf : BedSheetFabric(
        getType() == "DUVET_COVER",
        getFabricCategory() == "HOME_DECOR"
    )
then
    double meters = BedSheetUtils.duvetCoverMeters(
        $bsf.getLength(),
        $bsf.getWidth(),
        $bsf.getFabricWidth()
    );
    insert(new FabricRecommendation(
        $bsf.getFabric(),
        meters,
        "Duvet cover – length " + $bsf.getLength() +
        " cm, width " + $bsf.getWidth() + " cm"
    ));
end
