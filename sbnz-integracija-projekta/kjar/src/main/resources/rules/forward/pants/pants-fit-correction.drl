package forward

dialect "java"

import com.ftn.sbnz.model.models.PantsFabric
import com.ftn.sbnz.model.models.Recommendation
import com.ftn.sbnz.model.models.FabricRecommendation


// Loose fit (Å¡iroke nogavice)
rule "Loose fit (+10%)"
    salience 75
    no-loop true
when
    $pf : PantsFabric(pants.fit == "LOOSE")
    $rec : Recommendation(fabric == $pf.fabric)
then
    FabricRecommendation fr = new FabricRecommendation(
        $rec.getFabric(),
        $rec.getRequiredLength() + 0.1 * $rec.getRequiredLength(),
        $rec.getNote() + " Loose kroj â€” poveÄ‡ana metraÅ¾a za +10%.",
        "Pants",
        ""
    );
    insert(fr);
    System.out.println("ðŸ‘– Loose fit: +10% duÅ¾ine,  â†’ FabricRecommendation created.");
end


// Slim fit + rastegljivost â‰¥ 10%
rule "Slim fit stretchy (>=10%)"
    salience 74
    no-loop true
when
    $pf : PantsFabric(
        pants.fit == "SLIM",
        fabric.stretchPercentage >= 10
    )
    $rec : Recommendation(fabric == $pf.fabric)
then
    double newLen = $rec.getRequiredLength() - 0.1;
    FabricRecommendation fr = new FabricRecommendation(
        $rec.getFabric(),
        newLen,
        $rec.getNote() + " Slim kroj â€” rastegljiv materijal (â‰¥10%) smanjuje metraÅ¾u za 0.1m.",
        "Pants",
        "SLIM"
    );
    insert(fr);
    System.out.println("ðŸ‘– Slim fit (rastegljiv â‰¥10%): -0.1m  â†’ FabricRecommendation created.");
end

// Slim fit + rastegljivost < 10%
rule "Slim fit non-stretchy (<10%)"
    salience 74
    no-loop true
when
     $pf : PantsFabric(
        pants.fit == "SLIM",
        fabric.stretchPercentage < 10
     )
    $rec : Recommendation(fabric == $pf.fabric)
then
    System.out.println("âš ï¸ Slim fit (rastegljivost <10%) â€” materijal nije pogodan â†’ Recommendation removed.");
end



// Standard fit (bez korekcije)
rule "Standard fit (no correction)"
    salience 73
when
    $pf : PantsFabric(pants.fit == "STANDARD")
    $rec : Recommendation(fabric == $pf.fabric)
then
    FabricRecommendation fr = new FabricRecommendation(
        $rec.getFabric(),
        $rec.getRequiredLength(),
        $rec.getNote() + " Standard kroj â€” bez korekcije metraÅ¾e.",
        "Pants",
        ""
    );
    insert(fr);
    System.out.println("ðŸ‘– Standard fit: bez korekcije");
end
