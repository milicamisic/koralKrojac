<div class="recommender-container">
  <h2>Fabric Recommendation</h2>

  <div class="category-selection">
  <h3>Select Category</h3>
  <div class="category-buttons">
    <button mat-raised-button
            color="{{ category === 'Garment' ? 'primary' : '' }}"
            (click)="selectCategory('Garment')">
      Garment
    </button>

    <button mat-raised-button
            color="{{ category === 'Home Decor' ? 'primary' : '' }}"
            (click)="selectCategory('Home Decor')">
      Home Decor
    </button>
  </div>
</div>

@if (category) {
  <div class="item-selection">
    <h3>Select Item</h3>
    <div class="item-buttons">
      @if (category === 'Garment') {
        @for (item of clothingItems; track $index) {
          <button mat-stroked-button
                  color="{{ selectedItem === item ? 'accent' : '' }}"
                  (click)="selectItem(item)">
            {{ item }}
          </button>
        }
      } @else {
        @for (item of decorationItems; track $index) {
          <button mat-stroked-button
                  color="{{ selectedItem === item ? 'accent' : '' }}"
                  (click)="selectItem(item)">
            {{ item }}
          </button>
        }
      }
    </div>
  </div>
}



  
@if (selectedItem) {
  @if (selectedItem === 'Dress') {
    <app-dress-form (result)="result = $event"></app-dress-form>
  }
  @if (selectedItem === 'Shirt') {
    <app-shirt-form (result)="result = $event"></app-shirt-form>
  }
  @if (selectedItem === 'Blouse') {
    <app-blouse-form (result)="result = $event"></app-blouse-form>
  }
  @if (selectedItem === 'Pants') {
    <app-pants-form (result)="result = $event"></app-pants-form>
  }
  @if (selectedItem === 'Skirt') {
    <app-skirt-form (result)="result = $event"></app-skirt-form>
  }
  @if (selectedItem === 'Sweater') {
    <app-sweater-form (result)="result = $event"></app-sweater-form>
  }
  @if (selectedItem === 'Curtain') {
  <app-curtain-form (result)="result = $event"></app-curtain-form>
}
@if (selectedItem === 'Tablecloth') {
  <app-tablecloth-form (result)="result = $event"></app-tablecloth-form>
}
@if (selectedItem === 'Bedsheet') {
  <app-bedsheet-form (result)="result = $event"></app-bedsheet-form>
}
@if (selectedItem === 'Pillowcase') {
  <app-pillowcase-form (result)="result = $event"></app-pillowcase-form>
}

  @if (result.length) {
    <h3>Recommended Fabrics</h3>
    <table mat-table [dataSource]="result" class="mat-elevation-z2 full-width">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Fabric</th>
        <td mat-cell *matCellDef="let r">{{ r.fabricName }}</td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Type</th>
        <td mat-cell *matCellDef="let r">{{ r.fabricType }}</td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef>Price (din/m)</th>
        <td mat-cell *matCellDef="let r">{{ r.pricePerMeter | number: '1.2-2' }}</td>
      </ng-container>

      <ng-container matColumnDef="length">
        <th mat-header-cell *matHeaderCellDef>Required (m)</th>
        <td mat-cell *matCellDef="let r">{{ r.requiredLength | number: '1.2-2' }}</td>
      </ng-container>

      <ng-container matColumnDef="note">
        <th mat-header-cell *matHeaderCellDef>Note</th>
        <td mat-cell *matCellDef="let r">{{ r.note }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['name','type','price','length','note']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['name','type','price','length','note']"></tr>
    </table>
  }
}
</div>
